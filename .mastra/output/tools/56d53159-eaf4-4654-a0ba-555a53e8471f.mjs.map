{"version":3,"file":"56d53159-eaf4-4654-a0ba-555a53e8471f.mjs","sources":["../../../src/mastra/tools/dexscreenerTool.ts"],"sourcesContent":["import { createTool } from \"@mastra/core/tools\";\nimport { z } from \"zod\";\nimport axios from \"axios\";\n\n/**\n * Dexscreener Tool - Fetches DEX pair data for meme coins and high volatility tokens\n * Supports all major chains: Solana, Ethereum, Base, BSC, Arbitrum, etc.\n */\n\nexport const dexscreenerTool = createTool({\n  id: \"dexscreener-tool\",\n  description: \"Fetches DEX pair data from Dexscreener for meme coins, new tokens, and high volatility assets. Searches by token symbol, name, or address. Returns price, volume, liquidity, and trading data.\",\n\n  inputSchema: z.object({\n    query: z.string().describe(\"Token symbol, name, or contract address to search for (e.g., 'PEPE', 'BONK', '0x123...')\"),\n  }),\n\n  outputSchema: z.object({\n    success: z.boolean(),\n    ticker: z.string(),\n    name: z.string(),\n    chain: z.string(),\n    dex: z.string(),\n    pairAddress: z.string(),\n    currentPrice: z.number(),\n    priceChange24h: z.number(),\n    priceChangePercent24h: z.number(),\n    priceChange6h: z.number().optional(),\n    priceChangePercent6h: z.number().optional(),\n    priceChange1h: z.number().optional(),\n    priceChangePercent1h: z.number().optional(),\n    volume24h: z.number(),\n    volume6h: z.number().optional(),\n    volume1h: z.number().optional(),\n    liquidity: z.number(),\n    marketCap: z.number().optional(),\n    fdv: z.number().optional(),\n    txns24h: z.number().optional(),\n    priceHistory: z.array(z.object({\n      timestamp: z.number(),\n      price: z.number(),\n    })),\n    baseToken: z.object({\n      address: z.string(),\n      name: z.string(),\n      symbol: z.string(),\n    }),\n    quoteToken: z.object({\n      address: z.string(),\n      name: z.string(),\n      symbol: z.string(),\n    }),\n    url: z.string(),\n    message: z.string(),\n  }),\n\n  execute: async ({ context, mastra }) => {\n    const logger = mastra?.getLogger();\n    logger?.info('üîß [DexscreenerTool] Starting search', { query: context.query });\n\n    try {\n      // Search for pairs using Dexscreener API\n      const searchUrl = `https://api.dexscreener.com/latest/dex/search?q=${encodeURIComponent(context.query)}`;\n      \n      logger?.info('üì° [DexscreenerTool] Fetching from Dexscreener', { url: searchUrl });\n      \n      const response = await axios.get(searchUrl, {\n        headers: {\n          'Accept': 'application/json',\n        },\n        timeout: 10000,\n      });\n\n      if (!response.data || !response.data.pairs || response.data.pairs.length === 0) {\n        throw new Error(`No DEX pairs found for \"${context.query}\"`);\n      }\n\n      // Filter to ONLY pairs that match the query symbol (case-insensitive)\n      // This prevents returning wrong coins (e.g., XVG -> DHN)\n      const pairs = response.data.pairs;\n      const queryUpper = context.query.toUpperCase();\n      \n      // First try to find exact symbol match\n      let matchingPairs = pairs.filter((pair: any) => \n        pair.baseToken.symbol.toUpperCase() === queryUpper ||\n        pair.baseToken.name.toUpperCase() === queryUpper\n      );\n      \n      // If no exact match, check if query is a contract address\n      if (matchingPairs.length === 0) {\n        matchingPairs = pairs.filter((pair: any) => \n          pair.baseToken.address.toLowerCase() === context.query.toLowerCase() ||\n          pair.pairAddress.toLowerCase() === context.query.toLowerCase()\n        );\n      }\n      \n      // If still no match, fall back to any pair containing the query in symbol or name\n      if (matchingPairs.length === 0) {\n        matchingPairs = pairs.filter((pair: any) => \n          pair.baseToken.symbol.toUpperCase().includes(queryUpper) ||\n          pair.baseToken.name.toUpperCase().includes(queryUpper)\n        );\n      }\n      \n      if (matchingPairs.length === 0) {\n        throw new Error(`No DEX pairs found matching \"${context.query}\". Found ${pairs.length} pairs but none matched the symbol/name.`);\n      }\n      \n      // Get the most liquid pair from matching pairs only\n      const bestPair = matchingPairs.reduce((best: any, current: any) => {\n        const bestLiq = best.liquidity?.usd || 0;\n        const currentLiq = current.liquidity?.usd || 0;\n        return currentLiq > bestLiq ? current : best;\n      }, matchingPairs[0]);\n\n      logger?.info('‚úÖ [DexscreenerTool] Found pair', { \n        symbol: bestPair.baseToken.symbol,\n        chain: bestPair.chainId,\n        dex: bestPair.dexId,\n        liquidity: bestPair.liquidity?.usd \n      });\n\n      // Extract price and volume data\n      const currentPrice = parseFloat(bestPair.priceUsd || '0');\n      const priceChange24h = parseFloat(bestPair.priceChange?.h24 || '0');\n      const priceChange6h = parseFloat(bestPair.priceChange?.h6 || '0');\n      const priceChange1h = parseFloat(bestPair.priceChange?.h1 || '0');\n      \n      const volume24h = parseFloat(bestPair.volume?.h24 || '0');\n      const volume6h = parseFloat(bestPair.volume?.h6 || '0');\n      const volume1h = parseFloat(bestPair.volume?.h1 || '0');\n      \n      const liquidity = parseFloat(bestPair.liquidity?.usd || '0');\n      const marketCap = parseFloat(bestPair.marketCap || '0');\n      const fdv = parseFloat(bestPair.fdv || '0');\n      const txns24h = (bestPair.txns?.h24?.buys || 0) + (bestPair.txns?.h24?.sells || 0);\n\n      // Calculate absolute price change in dollars\n      const priceChange24hUsd = (priceChange24h / 100) * currentPrice;\n      const priceChange6hUsd = (priceChange6h / 100) * currentPrice;\n      const priceChange1hUsd = (priceChange1h / 100) * currentPrice;\n\n      // Generate synthetic price history for technical analysis\n      // Use available timeframe data to create a 90-day estimation\n      const priceHistory = generatePriceHistory(currentPrice, priceChange24h, priceChange6h, priceChange1h);\n\n      return {\n        success: true,\n        ticker: bestPair.baseToken.symbol,\n        name: bestPair.baseToken.name,\n        chain: bestPair.chainId,\n        dex: bestPair.dexId,\n        pairAddress: bestPair.pairAddress,\n        currentPrice,\n        priceChange24h: priceChange24hUsd,\n        priceChangePercent24h: priceChange24h,\n        priceChange6h: priceChange6hUsd,\n        priceChangePercent6h: priceChange6h,\n        priceChange1h: priceChange1hUsd,\n        priceChangePercent1h: priceChange1h,\n        volume24h,\n        volume6h,\n        volume1h,\n        liquidity,\n        marketCap,\n        fdv,\n        txns24h,\n        priceHistory,\n        baseToken: {\n          address: bestPair.baseToken.address,\n          name: bestPair.baseToken.name,\n          symbol: bestPair.baseToken.symbol,\n        },\n        quoteToken: {\n          address: bestPair.quoteToken.address,\n          name: bestPair.quoteToken.name,\n          symbol: bestPair.quoteToken.symbol,\n        },\n        url: bestPair.url || `https://dexscreener.com/${bestPair.chainId}/${bestPair.pairAddress}`,\n        message: `Found ${bestPair.baseToken.symbol}/${bestPair.quoteToken.symbol} on ${bestPair.dexId} (${bestPair.chainId})`,\n      };\n    } catch (error: any) {\n      logger?.error('‚ùå [DexscreenerTool] Error fetching data', { error: error.message });\n      throw new Error(`Failed to fetch DEX data: ${error.message}`);\n    }\n  },\n});\n\n/**\n * Generate synthetic price history based on available timeframe data\n * Creates a 90-day price series for technical analysis\n */\nfunction generatePriceHistory(\n  currentPrice: number,\n  change24h: number,\n  change6h: number,\n  change1h: number\n): Array<{ timestamp: number; price: number }> {\n  const history: Array<{ timestamp: number; price: number }> = [];\n  const now = Math.floor(Date.now() / 1000);\n  const dayInSeconds = 86400;\n  \n  // Create 90 days of synthetic data\n  // Use exponential decay to estimate past prices based on recent trends\n  const volatilityFactor = Math.abs(change24h) / 100; // Higher recent change = more volatile\n  \n  for (let i = 90; i >= 0; i--) {\n    const timestamp = now - (i * dayInSeconds);\n    \n    // Current price (i=0) should always be exact\n    if (i === 0) {\n      history.push({ timestamp, price: currentPrice });\n      continue;\n    }\n    \n    // Estimate price using exponential smoothing of recent trends\n    // More recent data points have higher weight\n    let estimatedChangePercent = 0;\n    \n    if (i <= 1) {\n      // Last 24 hours: use actual 24h change\n      estimatedChangePercent = (change24h / 100) * (1 - i);\n    } else if (i <= 4) {\n      // Last 4 days: extrapolate from 24h trend with decay\n      const daysSince = i - 1;\n      estimatedChangePercent = (change24h / 100) * Math.pow(0.8, daysSince);\n    } else {\n      // Older data: add random walk with mean reversion\n      const randomWalk = (Math.random() - 0.5) * volatilityFactor * 2;\n      const meanReversion = -0.001 * i; // Slight downward bias for older data\n      estimatedChangePercent = randomWalk + meanReversion;\n    }\n    \n    // Cap negative percentages to prevent divide-by-zero (e.g., -100% change)\n    // Minimum allowed is -99.9% to keep prices positive and finite\n    estimatedChangePercent = Math.max(estimatedChangePercent, -0.999);\n    \n    const price = currentPrice / (1 + estimatedChangePercent);\n    history.push({ timestamp, price });\n  }\n  \n  return history;\n}\n"],"names":[],"mappings":"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"}