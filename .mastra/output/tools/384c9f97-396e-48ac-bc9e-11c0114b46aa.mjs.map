{"version":3,"file":"384c9f97-396e-48ac-bc9e-11c0114b46aa.mjs","sources":["../../../src/mastra/tools/dexAnalysisTool.ts"],"sourcesContent":["import { createTool } from \"@mastra/core/tools\";\nimport { z } from \"zod\";\nimport { RSI, MACD, EMA, SMA, BollingerBands } from \"technicalindicators\";\n\n/**\n * DEX Technical Analysis Tool - Specialized analysis for DEX pairs and meme coins\n * Adapts technical indicators for high-volatility, low-liquidity assets\n */\n\nexport const dexAnalysisTool = createTool({\n  id: \"dex-analysis-tool\",\n  description: \"Performs specialized technical analysis on DEX pairs and meme coins. Adapts indicators for high volatility and includes DEX-specific metrics (liquidity, transaction count, rug risk assessment).\",\n\n  inputSchema: z.object({\n    ticker: z.string(),\n    name: z.string(),\n    chain: z.string(),\n    dex: z.string(),\n    currentPrice: z.number(),\n    priceChange24h: z.number(),\n    priceChangePercent24h: z.number(),\n    priceChange6h: z.number().optional(),\n    priceChangePercent6h: z.number().optional(),\n    volume24h: z.number(),\n    volume6h: z.number().optional(),\n    liquidity: z.number(),\n    marketCap: z.number().optional(),\n    txns24h: z.number().optional(),\n    priceHistory: z.array(z.object({\n      timestamp: z.number(),\n      price: z.number(),\n    })),\n  }),\n\n  outputSchema: z.object({\n    ticker: z.string(),\n    name: z.string(),\n    chain: z.string(),\n    dex: z.string(),\n    currentPrice: z.number(),\n    priceChange24h: z.number(),\n    priceChangePercent24h: z.number(),\n    rsi: z.number(),\n    macd: z.object({\n      value: z.number(),\n      signal: z.number(),\n      histogram: z.number(),\n    }),\n    ema9: z.number(),\n    ema21: z.number(),\n    sma20: z.number(),\n    bollingerBands: z.object({\n      upper: z.number(),\n      middle: z.number(),\n      lower: z.number(),\n      bandwidth: z.number(),\n    }),\n    liquidity: z.number(),\n    volume24h: z.number(),\n    txns24h: z.number(),\n    volatility: z.number(),\n    liquidityScore: z.string(),\n    rugRisk: z.string(),\n    signals: z.array(z.string()),\n    recommendation: z.enum(['BUY', 'SELL', 'HOLD', 'STRONG_BUY', 'STRONG_SELL', 'EXTREME_RISK']),\n    signalCount: z.object({\n      bullish: z.number(),\n      bearish: z.number(),\n    }),\n  }),\n\n  execute: async ({ context, mastra }) => {\n    const logger = mastra?.getLogger();\n    logger?.info('üîß [DexAnalysisTool] Starting DEX analysis', { ticker: context.ticker });\n\n    const closePrices = context.priceHistory.map(p => p.price);\n\n    logger?.info('üìä [DexAnalysisTool] Calculating indicators', { dataPoints: closePrices.length });\n\n    // Calculate RSI (shorter period for DEX - more responsive)\n    const rsiValues = RSI.calculate({ values: closePrices, period: 14 });\n    const currentRSI = rsiValues[rsiValues.length - 1] || 50;\n\n    // Calculate MACD\n    const macdValues = MACD.calculate({\n      values: closePrices,\n      fastPeriod: 12,\n      slowPeriod: 26,\n      signalPeriod: 9,\n      SimpleMAOscillator: false,\n      SimpleMASignal: false,\n    });\n    const currentMACD = macdValues[macdValues.length - 1] || { MACD: 0, signal: 0, histogram: 0 };\n\n    // Calculate shorter EMAs for DEX (faster signals)\n    const ema9Values = EMA.calculate({ values: closePrices, period: 9 });\n    const ema21Values = EMA.calculate({ values: closePrices, period: 21 });\n    const currentEMA9 = ema9Values[ema9Values.length - 1] || context.currentPrice;\n    const currentEMA21 = ema21Values[ema21Values.length - 1] || context.currentPrice;\n\n    // Calculate SMA\n    const sma20Values = SMA.calculate({ values: closePrices, period: 20 });\n    const currentSMA20 = sma20Values[sma20Values.length - 1] || context.currentPrice;\n\n    // Calculate Bollinger Bands\n    const bbValues = BollingerBands.calculate({\n      values: closePrices,\n      period: 20,\n      stdDev: 2,\n    });\n    const currentBB = bbValues[bbValues.length - 1] || { upper: 0, middle: 0, lower: 0 };\n    const bandwidth = ((currentBB.upper - currentBB.lower) / currentBB.middle) * 100;\n\n    // Calculate volatility\n    const volatility = calculateVolatility(closePrices);\n\n    // DEX-specific assessments\n    const liquidityScore = assessLiquidity(context.liquidity, context.volume24h);\n    const rugRisk = assessRugRisk(context.liquidity, context.marketCap || 0, context.txns24h || 0, closePrices);\n\n    logger?.info('üìù [DexAnalysisTool] Generating signals');\n\n    // Generate signals\n    const signals: string[] = [];\n    let bullishCount = 0;\n    let bearishCount = 0;\n\n    // RSI signals\n    if (currentRSI < 30) {\n      signals.push('RSI oversold - potential bounce');\n      bullishCount++;\n    } else if (currentRSI > 70) {\n      signals.push('RSI overbought - take profits');\n      bearishCount++;\n    }\n\n    // MACD signals\n    if (currentMACD.histogram && currentMACD.MACD && currentMACD.signal) {\n      if (currentMACD.histogram > 0 && currentMACD.MACD > currentMACD.signal) {\n        signals.push('MACD bullish momentum');\n        bullishCount++;\n      } else if (currentMACD.histogram < 0 && currentMACD.MACD < currentMACD.signal) {\n        signals.push('MACD bearish momentum');\n        bearishCount++;\n      }\n    }\n\n    // Short-term EMA crossover\n    if (context.currentPrice > currentEMA9 && currentEMA9 > currentEMA21) {\n      signals.push('Short-term uptrend (EMA 9 > EMA 21)');\n      bullishCount++;\n    } else if (context.currentPrice < currentEMA9 && currentEMA9 < currentEMA21) {\n      signals.push('Short-term downtrend (EMA 9 < EMA 21)');\n      bearishCount++;\n    }\n\n    // Bollinger Band signals\n    if (context.currentPrice < currentBB.lower) {\n      signals.push('Price below lower BB - oversold');\n      bullishCount++;\n    } else if (context.currentPrice > currentBB.upper) {\n      signals.push('Price above upper BB - overbought');\n      bearishCount++;\n    }\n\n    // Liquidity signals (DEX-specific)\n    if (liquidityScore === 'Critical' || liquidityScore === 'Low') {\n      signals.push(`‚ö†Ô∏è ${liquidityScore} liquidity - high slippage risk`);\n      bearishCount += 2; // Extra weight for low liquidity\n    } else if (liquidityScore === 'Excellent') {\n      signals.push('Strong liquidity - safe entry/exit');\n      bullishCount++;\n    }\n\n    // Rug risk assessment (DEX-specific)\n    if (rugRisk === 'EXTREME' || rugRisk === 'HIGH') {\n      signals.push(`üö® ${rugRisk} rug risk - proceed with extreme caution`);\n      bearishCount += 3; // Heavy weight for rug risk\n    }\n\n    // Volume signals\n    const volumeToLiqRatio = context.volume24h / context.liquidity;\n    if (volumeToLiqRatio > 2) {\n      signals.push('High volume/liquidity ratio - strong interest');\n      bullishCount++;\n    } else if (volumeToLiqRatio < 0.1) {\n      signals.push('Low volume - dead coin risk');\n      bearishCount++;\n    }\n\n    // Transaction count signals\n    if (context.txns24h && context.txns24h > 1000) {\n      signals.push('High transaction count - active trading');\n      bullishCount++;\n    } else if (context.txns24h && context.txns24h < 50) {\n      signals.push('Low transaction count - low interest');\n      bearishCount++;\n    }\n\n    // Determine recommendation\n    let recommendation: 'BUY' | 'SELL' | 'HOLD' | 'STRONG_BUY' | 'STRONG_SELL' | 'EXTREME_RISK';\n    \n    // Override with EXTREME_RISK if rug risk is high\n    if (rugRisk === 'EXTREME') {\n      recommendation = 'EXTREME_RISK';\n    } else {\n      const netSignal = bullishCount - bearishCount;\n      \n      if (netSignal >= 3) {\n        recommendation = 'STRONG_BUY';\n      } else if (netSignal >= 1) {\n        recommendation = 'BUY';\n      } else if (netSignal <= -3) {\n        recommendation = 'STRONG_SELL';\n      } else if (netSignal <= -1) {\n        recommendation = 'SELL';\n      } else {\n        recommendation = 'HOLD';\n      }\n    }\n\n    logger?.info('‚úÖ [DexAnalysisTool] Analysis complete', { \n      ticker: context.ticker,\n      recommendation,\n      rugRisk,\n      liquidityScore\n    });\n\n    return {\n      ticker: context.ticker,\n      name: context.name,\n      chain: context.chain,\n      dex: context.dex,\n      currentPrice: context.currentPrice,\n      priceChange24h: context.priceChange24h,\n      priceChangePercent24h: context.priceChangePercent24h,\n      rsi: parseFloat(currentRSI.toFixed(1)),\n      macd: {\n        value: parseFloat((currentMACD.MACD || 0).toFixed(6)),\n        signal: parseFloat((currentMACD.signal || 0).toFixed(6)),\n        histogram: parseFloat((currentMACD.histogram || 0).toFixed(6)),\n      },\n      ema9: parseFloat(currentEMA9.toFixed(8)),\n      ema21: parseFloat(currentEMA21.toFixed(8)),\n      sma20: parseFloat(currentSMA20.toFixed(8)),\n      bollingerBands: {\n        upper: parseFloat(currentBB.upper.toFixed(8)),\n        middle: parseFloat(currentBB.middle.toFixed(8)),\n        lower: parseFloat(currentBB.lower.toFixed(8)),\n        bandwidth: parseFloat(bandwidth.toFixed(2)),\n      },\n      liquidity: context.liquidity,\n      volume24h: context.volume24h,\n      txns24h: context.txns24h || 0,\n      volatility: parseFloat(volatility.toFixed(1)),\n      liquidityScore,\n      rugRisk,\n      signals,\n      recommendation,\n      signalCount: {\n        bullish: bullishCount,\n        bearish: bearishCount,\n      },\n    };\n  },\n});\n\n// Helper functions\n\nfunction calculateVolatility(prices: number[]): number {\n  const returns = [];\n  for (let i = 1; i < prices.length; i++) {\n    returns.push((prices[i] - prices[i - 1]) / prices[i - 1]);\n  }\n  \n  const mean = returns.reduce((a, b) => a + b, 0) / returns.length;\n  const variance = returns.reduce((sum, r) => sum + Math.pow(r - mean, 2), 0) / returns.length;\n  const stdDev = Math.sqrt(variance);\n  \n  return stdDev * 100;\n}\n\nfunction assessLiquidity(liquidity: number, volume24h: number): string {\n  // Liquidity assessment based on USD value\n  if (liquidity < 5000) return 'Critical';\n  if (liquidity < 25000) return 'Low';\n  if (liquidity < 100000) return 'Moderate';\n  if (liquidity < 500000) return 'Good';\n  return 'Excellent';\n}\n\nfunction assessRugRisk(liquidity: number, marketCap: number, txns24h: number, prices: number[]): string {\n  let riskScore = 0;\n  \n  // Very low liquidity\n  if (liquidity < 10000) riskScore += 3;\n  else if (liquidity < 50000) riskScore += 1;\n  \n  // Low transaction count\n  if (txns24h < 50) riskScore += 2;\n  else if (txns24h < 200) riskScore += 1;\n  \n  // Market cap to liquidity ratio\n  if (marketCap > 0) {\n    const mcToLiq = marketCap / liquidity;\n    if (mcToLiq > 100) riskScore += 2; // Very high MC vs liquidity = suspicious\n  }\n  \n  // Extreme volatility check (potential pump & dump)\n  const recentPrices = prices.slice(-7); // Last week\n  const maxPrice = Math.max(...recentPrices);\n  const minPrice = Math.min(...recentPrices);\n  const priceRange = ((maxPrice - minPrice) / minPrice) * 100;\n  \n  if (priceRange > 300) riskScore += 2; // >300% swing in a week\n  else if (priceRange > 150) riskScore += 1;\n  \n  // Determine risk level\n  if (riskScore >= 5) return 'EXTREME';\n  if (riskScore >= 3) return 'HIGH';\n  if (riskScore >= 1) return 'MODERATE';\n  return 'LOW';\n}\n"],"names":[],"mappings":";;;;AASO,MAAM,kBAAkB,UAAA,CAAW;AAAA,EACxC,EAAA,EAAI,mBAAA;AAAA,EACJ,WAAA,EAAa,mMAAA;AAAA,EAEb,WAAA,EAAa,EAAE,MAAA,CAAO;AAAA,IACpB,MAAA,EAAQ,EAAE,MAAA,EAAO;AAAA,IACjB,IAAA,EAAM,EAAE,MAAA,EAAO;AAAA,IACf,KAAA,EAAO,EAAE,MAAA,EAAO;AAAA,IAChB,GAAA,EAAK,EAAE,MAAA,EAAO;AAAA,IACd,YAAA,EAAc,EAAE,MAAA,EAAO;AAAA,IACvB,cAAA,EAAgB,EAAE,MAAA,EAAO;AAAA,IACzB,qBAAA,EAAuB,EAAE,MAAA,EAAO;AAAA,IAChC,aAAA,EAAe,CAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IACnC,oBAAA,EAAsB,CAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IAC1C,SAAA,EAAW,EAAE,MAAA,EAAO;AAAA,IACpB,QAAA,EAAU,CAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IAC9B,SAAA,EAAW,EAAE,MAAA,EAAO;AAAA,IACpB,SAAA,EAAW,CAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IAC/B,OAAA,EAAS,CAAA,CAAE,MAAA,EAAO,CAAE,QAAA,EAAS;AAAA,IAC7B,YAAA,EAAc,CAAA,CAAE,KAAA,CAAM,CAAA,CAAE,MAAA,CAAO;AAAA,MAC7B,SAAA,EAAW,EAAE,MAAA,EAAO;AAAA,MACpB,KAAA,EAAO,EAAE,MAAA;AAAO,KACjB,CAAC;AAAA,GACH,CAAA;AAAA,EAED,YAAA,EAAc,EAAE,MAAA,CAAO;AAAA,IACrB,MAAA,EAAQ,EAAE,MAAA,EAAO;AAAA,IACjB,IAAA,EAAM,EAAE,MAAA,EAAO;AAAA,IACf,KAAA,EAAO,EAAE,MAAA,EAAO;AAAA,IAChB,GAAA,EAAK,EAAE,MAAA,EAAO;AAAA,IACd,YAAA,EAAc,EAAE,MAAA,EAAO;AAAA,IACvB,cAAA,EAAgB,EAAE,MAAA,EAAO;AAAA,IACzB,qBAAA,EAAuB,EAAE,MAAA,EAAO;AAAA,IAChC,GAAA,EAAK,EAAE,MAAA,EAAO;AAAA,IACd,IAAA,EAAM,EAAE,MAAA,CAAO;AAAA,MACb,KAAA,EAAO,EAAE,MAAA,EAAO;AAAA,MAChB,MAAA,EAAQ,EAAE,MAAA,EAAO;AAAA,MACjB,SAAA,EAAW,EAAE,MAAA;AAAO,KACrB,CAAA;AAAA,IACD,IAAA,EAAM,EAAE,MAAA,EAAO;AAAA,IACf,KAAA,EAAO,EAAE,MAAA,EAAO;AAAA,IAChB,KAAA,EAAO,EAAE,MAAA,EAAO;AAAA,IAChB,cAAA,EAAgB,EAAE,MAAA,CAAO;AAAA,MACvB,KAAA,EAAO,EAAE,MAAA,EAAO;AAAA,MAChB,MAAA,EAAQ,EAAE,MAAA,EAAO;AAAA,MACjB,KAAA,EAAO,EAAE,MAAA,EAAO;AAAA,MAChB,SAAA,EAAW,EAAE,MAAA;AAAO,KACrB,CAAA;AAAA,IACD,SAAA,EAAW,EAAE,MAAA,EAAO;AAAA,IACpB,SAAA,EAAW,EAAE,MAAA,EAAO;AAAA,IACpB,OAAA,EAAS,EAAE,MAAA,EAAO;AAAA,IAClB,UAAA,EAAY,EAAE,MAAA,EAAO;AAAA,IACrB,cAAA,EAAgB,EAAE,MAAA,EAAO;AAAA,IACzB,OAAA,EAAS,EAAE,MAAA,EAAO;AAAA,IAClB,OAAA,EAAS,CAAA,CAAE,KAAA,CAAM,CAAA,CAAE,QAAQ,CAAA;AAAA,IAC3B,cAAA,EAAgB,CAAA,CAAE,IAAA,CAAK,CAAC,KAAA,EAAO,QAAQ,MAAA,EAAQ,YAAA,EAAc,aAAA,EAAe,cAAc,CAAC,CAAA;AAAA,IAC3F,WAAA,EAAa,EAAE,MAAA,CAAO;AAAA,MACpB,OAAA,EAAS,EAAE,MAAA,EAAO;AAAA,MAClB,OAAA,EAAS,EAAE,MAAA;AAAO,KACnB;AAAA,GACF,CAAA;AAAA,EAED,OAAA,EAAS,OAAO,EAAE,OAAA,EAAS,QAAO,KAAM;AACtC,IAAA,MAAM,MAAA,GAAS,QAAQ,SAAA,EAAU;AACjC,IAAA,MAAA,EAAQ,KAAK,mDAAA,EAA8C,EAAE,MAAA,EAAQ,OAAA,CAAQ,QAAQ,CAAA;AAErF,IAAA,MAAM,cAAc,OAAA,CAAQ,YAAA,CAAa,GAAA,CAAI,CAAA,CAAA,KAAK,EAAE,KAAK,CAAA;AAEzD,IAAA,MAAA,EAAQ,KAAK,oDAAA,EAA+C,EAAE,UAAA,EAAY,WAAA,CAAY,QAAQ,CAAA;AAG9F,IAAA,MAAM,SAAA,GAAY,IAAI,SAAA,CAAU,EAAE,QAAQ,WAAA,EAAa,MAAA,EAAQ,IAAI,CAAA;AACnE,IAAA,MAAM,UAAA,GAAa,SAAA,CAAU,SAAA,CAAU,MAAA,GAAS,CAAC,CAAA,IAAK,EAAA;AAGtD,IAAA,MAAM,UAAA,GAAa,KAAK,SAAA,CAAU;AAAA,MAChC,MAAA,EAAQ,WAAA;AAAA,MACR,UAAA,EAAY,EAAA;AAAA,MACZ,UAAA,EAAY,EAAA;AAAA,MACZ,YAAA,EAAc,CAAA;AAAA,MACd,kBAAA,EAAoB,KAAA;AAAA,MACpB,cAAA,EAAgB;AAAA,KACjB,CAAA;AACD,IAAA,MAAM,WAAA,GAAc,UAAA,CAAW,UAAA,CAAW,MAAA,GAAS,CAAC,CAAA,IAAK,EAAE,IAAA,EAAM,CAAA,EAAG,MAAA,EAAQ,CAAA,EAAG,SAAA,EAAW,CAAA,EAAE;AAG5F,IAAA,MAAM,UAAA,GAAa,IAAI,SAAA,CAAU,EAAE,QAAQ,WAAA,EAAa,MAAA,EAAQ,GAAG,CAAA;AACnE,IAAA,MAAM,WAAA,GAAc,IAAI,SAAA,CAAU,EAAE,QAAQ,WAAA,EAAa,MAAA,EAAQ,IAAI,CAAA;AACrE,IAAA,MAAM,cAAc,UAAA,CAAW,UAAA,CAAW,MAAA,GAAS,CAAC,KAAK,OAAA,CAAQ,YAAA;AACjE,IAAA,MAAM,eAAe,WAAA,CAAY,WAAA,CAAY,MAAA,GAAS,CAAC,KAAK,OAAA,CAAQ,YAAA;AAGpE,IAAA,MAAM,WAAA,GAAc,IAAI,SAAA,CAAU,EAAE,QAAQ,WAAA,EAAa,MAAA,EAAQ,IAAI,CAAA;AACrE,IAAA,MAAM,eAAe,WAAA,CAAY,WAAA,CAAY,MAAA,GAAS,CAAC,KAAK,OAAA,CAAQ,YAAA;AAGpE,IAAA,MAAM,QAAA,GAAW,eAAe,SAAA,CAAU;AAAA,MACxC,MAAA,EAAQ,WAAA;AAAA,MACR,MAAA,EAAQ,EAAA;AAAA,MACR,MAAA,EAAQ;AAAA,KACT,CAAA;AACD,IAAA,MAAM,SAAA,GAAY,QAAA,CAAS,QAAA,CAAS,MAAA,GAAS,CAAC,CAAA,IAAK,EAAE,KAAA,EAAO,CAAA,EAAG,MAAA,EAAQ,CAAA,EAAG,KAAA,EAAO,CAAA,EAAE;AACnF,IAAA,MAAM,aAAc,SAAA,CAAU,KAAA,GAAQ,SAAA,CAAU,KAAA,IAAS,UAAU,MAAA,GAAU,GAAA;AAG7E,IAAA,MAAM,UAAA,GAAa,oBAAoB,WAAW,CAAA;AAGlD,IAAA,MAAM,cAAA,GAAiB,eAAA,CAAgB,OAAA,CAAQ,SAA4B,CAAA;AAC3E,IAAA,MAAM,OAAA,GAAU,aAAA,CAAc,OAAA,CAAQ,SAAA,EAAW,OAAA,CAAQ,aAAa,CAAA,EAAG,OAAA,CAAQ,OAAA,IAAW,CAAA,EAAG,WAAW,CAAA;AAE1G,IAAA,MAAA,EAAQ,KAAK,gDAAyC,CAAA;AAGtD,IAAA,MAAM,UAAoB,EAAC;AAC3B,IAAA,IAAI,YAAA,GAAe,CAAA;AACnB,IAAA,IAAI,YAAA,GAAe,CAAA;AAGnB,IAAA,IAAI,aAAa,EAAA,EAAI;AACnB,MAAA,OAAA,CAAQ,KAAK,iCAAiC,CAAA;AAC9C,MAAA,YAAA,EAAA;AAAA,IACF,CAAA,MAAA,IAAW,aAAa,EAAA,EAAI;AAC1B,MAAA,OAAA,CAAQ,KAAK,+BAA+B,CAAA;AAC5C,MAAA,YAAA,EAAA;AAAA,IACF;AAGA,IAAA,IAAI,WAAA,CAAY,SAAA,IAAa,WAAA,CAAY,IAAA,IAAQ,YAAY,MAAA,EAAQ;AACnE,MAAA,IAAI,YAAY,SAAA,GAAY,CAAA,IAAK,WAAA,CAAY,IAAA,GAAO,YAAY,MAAA,EAAQ;AACtE,QAAA,OAAA,CAAQ,KAAK,uBAAuB,CAAA;AACpC,QAAA,YAAA,EAAA;AAAA,MACF,WAAW,WAAA,CAAY,SAAA,GAAY,KAAK,WAAA,CAAY,IAAA,GAAO,YAAY,MAAA,EAAQ;AAC7E,QAAA,OAAA,CAAQ,KAAK,uBAAuB,CAAA;AACpC,QAAA,YAAA,EAAA;AAAA,MACF;AAAA,IACF;AAGA,IAAA,IAAI,OAAA,CAAQ,YAAA,GAAe,WAAA,IAAe,WAAA,GAAc,YAAA,EAAc;AACpE,MAAA,OAAA,CAAQ,KAAK,qCAAqC,CAAA;AAClD,MAAA,YAAA,EAAA;AAAA,IACF,CAAA,MAAA,IAAW,OAAA,CAAQ,YAAA,GAAe,WAAA,IAAe,cAAc,YAAA,EAAc;AAC3E,MAAA,OAAA,CAAQ,KAAK,uCAAuC,CAAA;AACpD,MAAA,YAAA,EAAA;AAAA,IACF;AAGA,IAAA,IAAI,OAAA,CAAQ,YAAA,GAAe,SAAA,CAAU,KAAA,EAAO;AAC1C,MAAA,OAAA,CAAQ,KAAK,iCAAiC,CAAA;AAC9C,MAAA,YAAA,EAAA;AAAA,IACF,CAAA,MAAA,IAAW,OAAA,CAAQ,YAAA,GAAe,SAAA,CAAU,KAAA,EAAO;AACjD,MAAA,OAAA,CAAQ,KAAK,mCAAmC,CAAA;AAChD,MAAA,YAAA,EAAA;AAAA,IACF;AAGA,IAAA,IAAI,cAAA,KAAmB,UAAA,IAAc,cAAA,KAAmB,KAAA,EAAO;AAC7D,MAAA,OAAA,CAAQ,IAAA,CAAK,CAAA,aAAA,EAAM,cAAc,CAAA,+BAAA,CAAiC,CAAA;AAClE,MAAA,YAAA,IAAgB,CAAA;AAAA,IAClB,CAAA,MAAA,IAAW,mBAAmB,WAAA,EAAa;AACzC,MAAA,OAAA,CAAQ,KAAK,oCAAoC,CAAA;AACjD,MAAA,YAAA,EAAA;AAAA,IACF;AAGA,IAAA,IAAI,OAAA,KAAY,SAAA,IAAa,OAAA,KAAY,MAAA,EAAQ;AAC/C,MAAA,OAAA,CAAQ,IAAA,CAAK,CAAA,UAAA,EAAM,OAAO,CAAA,wCAAA,CAA0C,CAAA;AACpE,MAAA,YAAA,IAAgB,CAAA;AAAA,IAClB;AAGA,IAAA,MAAM,gBAAA,GAAmB,OAAA,CAAQ,SAAA,GAAY,OAAA,CAAQ,SAAA;AACrD,IAAA,IAAI,mBAAmB,CAAA,EAAG;AACxB,MAAA,OAAA,CAAQ,KAAK,+CAA+C,CAAA;AAC5D,MAAA,YAAA,EAAA;AAAA,IACF,CAAA,MAAA,IAAW,mBAAmB,GAAA,EAAK;AACjC,MAAA,OAAA,CAAQ,KAAK,6BAA6B,CAAA;AAC1C,MAAA,YAAA,EAAA;AAAA,IACF;AAGA,IAAA,IAAI,OAAA,CAAQ,OAAA,IAAW,OAAA,CAAQ,OAAA,GAAU,GAAA,EAAM;AAC7C,MAAA,OAAA,CAAQ,KAAK,yCAAyC,CAAA;AACtD,MAAA,YAAA,EAAA;AAAA,IACF,CAAA,MAAA,IAAW,OAAA,CAAQ,OAAA,IAAW,OAAA,CAAQ,UAAU,EAAA,EAAI;AAClD,MAAA,OAAA,CAAQ,KAAK,sCAAsC,CAAA;AACnD,MAAA,YAAA,EAAA;AAAA,IACF;AAGA,IAAA,IAAI,cAAA;AAGJ,IAAA,IAAI,YAAY,SAAA,EAAW;AACzB,MAAA,cAAA,GAAiB,cAAA;AAAA,IACnB,CAAA,MAAO;AACL,MAAA,MAAM,YAAY,YAAA,GAAe,YAAA;AAEjC,MAAA,IAAI,aAAa,CAAA,EAAG;AAClB,QAAA,cAAA,GAAiB,YAAA;AAAA,MACnB,CAAA,MAAA,IAAW,aAAa,CAAA,EAAG;AACzB,QAAA,cAAA,GAAiB,KAAA;AAAA,MACnB,CAAA,MAAA,IAAW,aAAa,EAAA,EAAI;AAC1B,QAAA,cAAA,GAAiB,aAAA;AAAA,MACnB,CAAA,MAAA,IAAW,aAAa,EAAA,EAAI;AAC1B,QAAA,cAAA,GAAiB,MAAA;AAAA,MACnB,CAAA,MAAO;AACL,QAAA,cAAA,GAAiB,MAAA;AAAA,MACnB;AAAA,IACF;AAEA,IAAA,MAAA,EAAQ,KAAK,4CAAA,EAAyC;AAAA,MACpD,QAAQ,OAAA,CAAQ,MAAA;AAAA,MAChB,cAAA;AAAA,MACA,OAAA;AAAA,MACA;AAAA,KACD,CAAA;AAED,IAAA,OAAO;AAAA,MACL,QAAQ,OAAA,CAAQ,MAAA;AAAA,MAChB,MAAM,OAAA,CAAQ,IAAA;AAAA,MACd,OAAO,OAAA,CAAQ,KAAA;AAAA,MACf,KAAK,OAAA,CAAQ,GAAA;AAAA,MACb,cAAc,OAAA,CAAQ,YAAA;AAAA,MACtB,gBAAgB,OAAA,CAAQ,cAAA;AAAA,MACxB,uBAAuB,OAAA,CAAQ,qBAAA;AAAA,MAC/B,GAAA,EAAK,UAAA,CAAW,UAAA,CAAW,OAAA,CAAQ,CAAC,CAAC,CAAA;AAAA,MACrC,IAAA,EAAM;AAAA,QACJ,OAAO,UAAA,CAAA,CAAY,WAAA,CAAY,QAAQ,CAAA,EAAG,OAAA,CAAQ,CAAC,CAAC,CAAA;AAAA,QACpD,QAAQ,UAAA,CAAA,CAAY,WAAA,CAAY,UAAU,CAAA,EAAG,OAAA,CAAQ,CAAC,CAAC,CAAA;AAAA,QACvD,WAAW,UAAA,CAAA,CAAY,WAAA,CAAY,aAAa,CAAA,EAAG,OAAA,CAAQ,CAAC,CAAC;AAAA,OAC/D;AAAA,MACA,IAAA,EAAM,UAAA,CAAW,WAAA,CAAY,OAAA,CAAQ,CAAC,CAAC,CAAA;AAAA,MACvC,KAAA,EAAO,UAAA,CAAW,YAAA,CAAa,OAAA,CAAQ,CAAC,CAAC,CAAA;AAAA,MACzC,KAAA,EAAO,UAAA,CAAW,YAAA,CAAa,OAAA,CAAQ,CAAC,CAAC,CAAA;AAAA,MACzC,cAAA,EAAgB;AAAA,QACd,OAAO,UAAA,CAAW,SAAA,CAAU,KAAA,CAAM,OAAA,CAAQ,CAAC,CAAC,CAAA;AAAA,QAC5C,QAAQ,UAAA,CAAW,SAAA,CAAU,MAAA,CAAO,OAAA,CAAQ,CAAC,CAAC,CAAA;AAAA,QAC9C,OAAO,UAAA,CAAW,SAAA,CAAU,KAAA,CAAM,OAAA,CAAQ,CAAC,CAAC,CAAA;AAAA,QAC5C,SAAA,EAAW,UAAA,CAAW,SAAA,CAAU,OAAA,CAAQ,CAAC,CAAC;AAAA,OAC5C;AAAA,MACA,WAAW,OAAA,CAAQ,SAAA;AAAA,MACnB,WAAW,OAAA,CAAQ,SAAA;AAAA,MACnB,OAAA,EAAS,QAAQ,OAAA,IAAW,CAAA;AAAA,MAC5B,UAAA,EAAY,UAAA,CAAW,UAAA,CAAW,OAAA,CAAQ,CAAC,CAAC,CAAA;AAAA,MAC5C,cAAA;AAAA,MACA,OAAA;AAAA,MACA,OAAA;AAAA,MACA,cAAA;AAAA,MACA,WAAA,EAAa;AAAA,QACX,OAAA,EAAS,YAAA;AAAA,QACT,OAAA,EAAS;AAAA;AACX,KACF;AAAA,EACF;AACF,CAAC;AAID,SAAS,oBAAoB,MAAA,EAA0B;AACrD,EAAA,MAAM,UAAU,EAAC;AACjB,EAAA,KAAA,IAAS,CAAA,GAAI,CAAA,EAAG,CAAA,GAAI,MAAA,CAAO,QAAQ,CAAA,EAAA,EAAK;AACtC,IAAA,OAAA,CAAQ,IAAA,CAAA,CAAM,MAAA,CAAO,CAAC,CAAA,GAAI,MAAA,CAAO,CAAA,GAAI,CAAC,CAAA,IAAK,MAAA,CAAO,CAAA,GAAI,CAAC,CAAC,CAAA;AAAA,EAC1D;AAEA,EAAA,MAAM,IAAA,GAAO,OAAA,CAAQ,MAAA,CAAO,CAAC,CAAA,EAAG,MAAM,CAAA,GAAI,CAAA,EAAG,CAAC,CAAA,GAAI,OAAA,CAAQ,MAAA;AAC1D,EAAA,MAAM,QAAA,GAAW,OAAA,CAAQ,MAAA,CAAO,CAAC,KAAK,CAAA,KAAM,GAAA,GAAM,IAAA,CAAK,GAAA,CAAI,IAAI,IAAA,EAAM,CAAC,CAAA,EAAG,CAAC,IAAI,OAAA,CAAQ,MAAA;AACtF,EAAA,MAAM,MAAA,GAAS,IAAA,CAAK,IAAA,CAAK,QAAQ,CAAA;AAEjC,EAAA,OAAO,MAAA,GAAS,GAAA;AAClB;AAEA,SAAS,eAAA,CAAgB,WAAmB,SAAA,EAA2B;AAErE,EAAA,IAAI,SAAA,GAAY,KAAM,OAAO,UAAA;AAC7B,EAAA,IAAI,SAAA,GAAY,MAAO,OAAO,KAAA;AAC9B,EAAA,IAAI,SAAA,GAAY,KAAQ,OAAO,UAAA;AAC/B,EAAA,IAAI,SAAA,GAAY,KAAQ,OAAO,MAAA;AAC/B,EAAA,OAAO,WAAA;AACT;AAEA,SAAS,aAAA,CAAc,SAAA,EAAmB,SAAA,EAAmB,OAAA,EAAiB,MAAA,EAA0B;AACtG,EAAA,IAAI,SAAA,GAAY,CAAA;AAGhB,EAAA,IAAI,SAAA,GAAY,KAAO,SAAA,IAAa,CAAA;AAAA,OAAA,IAC3B,SAAA,GAAY,KAAO,SAAA,IAAa,CAAA;AAGzC,EAAA,IAAI,OAAA,GAAU,IAAI,SAAA,IAAa,CAAA;AAAA,OAAA,IACtB,OAAA,GAAU,KAAK,SAAA,IAAa,CAAA;AAGrC,EAAA,IAAI,YAAY,CAAA,EAAG;AACjB,IAAA,MAAM,UAAU,SAAA,GAAY,SAAA;AAC5B,IAAA,IAAI,OAAA,GAAU,KAAK,SAAA,IAAa,CAAA;AAAA,EAClC;AAGA,EAAA,MAAM,YAAA,GAAe,MAAA,CAAO,KAAA,CAAM,EAAE,CAAA;AACpC,EAAA,MAAM,QAAA,GAAW,IAAA,CAAK,GAAA,CAAI,GAAG,YAAY,CAAA;AACzC,EAAA,MAAM,QAAA,GAAW,IAAA,CAAK,GAAA,CAAI,GAAG,YAAY,CAAA;AACzC,EAAA,MAAM,UAAA,GAAA,CAAe,QAAA,GAAW,QAAA,IAAY,QAAA,GAAY,GAAA;AAExD,EAAA,IAAI,UAAA,GAAa,KAAK,SAAA,IAAa,CAAA;AAAA,OAAA,IAC1B,UAAA,GAAa,KAAK,SAAA,IAAa,CAAA;AAGxC,EAAA,IAAI,SAAA,IAAa,GAAG,OAAO,SAAA;AAC3B,EAAA,IAAI,SAAA,IAAa,GAAG,OAAO,MAAA;AAC3B,EAAA,IAAI,SAAA,IAAa,GAAG,OAAO,UAAA;AAC3B,EAAA,OAAO,KAAA;AACT;;;;"}