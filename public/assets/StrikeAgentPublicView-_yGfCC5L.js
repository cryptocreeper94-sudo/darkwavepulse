import{r as o,j as e}from"./ThemeContext-ZEHC_FNP.js";function W({onSubscribe:t}){const[i,n]=o.useState([]),[h,F]=o.useState([]),[d,k]=o.useState({totalSignals:0,winRate:0,activeToday:0,tradesExecuted:0}),[w,z]=o.useState(!0),[u,R]=o.useState(0);o.useEffect(()=>{const r=async(a,p=3)=>{for(let c=0;c<p;c++){const l=await fetch(a,{cache:"no-store"});if(l.ok)return l;if(l.status===503){await new Promise(g=>setTimeout(g,2e3));continue}return l}return fetch(a,{cache:"no-store"})},s=async()=>{try{const a=`?_t=${Date.now()}`,[p,c,l]=await Promise.all([r(`/api/public/strikeagent/signals${a}`),r(`/api/public/strikeagent/executions${a}`),r(`/api/public/strikeagent/stats${a}`)]),g=await p.json(),b=await c.json(),j=await l.json(),m=g.signals||g.data||[];m.length>0&&n(m);const v=b.executions||b.data||[];v.length>0&&F(v);const x=j.stats||j;k({totalSignals:Number(x.totalSignals)||0,winRate:Number(x.winRate)||0,activeToday:Number(x.activeToday)||0,tradesExecuted:Number(x.tradesExecuted)||0})}catch(a){console.error("Failed to fetch public data:",a)}finally{z(!1)}};s();const I=setInterval(s,15e3);return()=>clearInterval(I)},[]),o.useEffect(()=>{if(i.length>0){const r=setInterval(()=>{R(s=>(s+1)%i.length)},4e3);return()=>clearInterval(r)}},[i.length]);const y=i[u]||null;return e.jsxs("div",{style:{minHeight:"100vh",background:"linear-gradient(180deg, #0a0a0a 0%, #0f0f0f 50%, #0a0a0a 100%)",padding:"16px",paddingBottom:"100px",color:"#fff"},children:[e.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:12,marginBottom:24,paddingTop:20},children:[e.jsx("div",{style:{width:72,height:72,background:"linear-gradient(135deg, #00D4FF 0%, #39FF14 100%)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:36,boxShadow:"0 0 40px rgba(0, 212, 255, 0.5)"},children:"ðŸŽ¯"}),e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("h1",{style:{fontSize:28,fontWeight:800,margin:0,background:"linear-gradient(135deg, #00D4FF, #39FF14)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"StrikeAgent"}),e.jsx("p",{style:{color:"#888",fontSize:14,margin:"4px 0 0"},children:"AI-Powered Trading Signals"})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:6,padding:"6px 12px",background:"rgba(57, 255, 20, 0.15)",border:"1px solid rgba(57, 255, 20, 0.3)",borderRadius:20},children:[e.jsx("div",{style:{width:8,height:8,background:"#39FF14",borderRadius:"50%",animation:"pulse 2s infinite"}}),e.jsx("span",{style:{fontSize:12,fontWeight:600,color:"#39FF14"},children:"LIVE"})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:12,marginBottom:24},children:[e.jsx(f,{label:"Total Signals",value:d.totalSignals||0}),e.jsx(f,{label:"Win Rate",value:`${parseFloat(d.winRate||0).toFixed(1)}%`,highlight:!0}),e.jsx(f,{label:"Active Today",value:d.activeToday||0}),e.jsx(f,{label:"Trades",value:d.tradesExecuted||0})]}),w?e.jsxs("div",{style:{textAlign:"center",padding:40,color:"#666"},children:[e.jsx("div",{style:{fontSize:32,marginBottom:12},children:"â³"}),"Loading signals..."]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(S,{title:"Live Signal",icon:"ðŸ“¡"}),y?e.jsx(C,{signal:y}):e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:12,padding:24,textAlign:"center",color:"#666"},children:"No active signals at the moment"}),i.length>1&&e.jsx("div",{style:{display:"flex",justifyContent:"center",gap:6,marginTop:12},children:i.map((r,s)=>e.jsx("div",{style:{width:8,height:8,borderRadius:"50%",background:s===u?"#00D4FF":"rgba(255,255,255,0.2)",transition:"background 0.3s"}},s))})]}),e.jsxs("div",{style:{marginBottom:24},children:[e.jsx(S,{title:"Recent Activity",icon:"âš¡"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:h.length>0?h.slice(0,5).map((r,s)=>e.jsx(T,{execution:r},s)):e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:12,padding:20,textAlign:"center",color:"#666"},children:"No recent executions"})})]})]}),e.jsxs("div",{style:{position:"fixed",bottom:0,left:0,right:0,padding:"16px",background:"linear-gradient(180deg, transparent 0%, #0a0a0a 30%)",paddingTop:40},children:[e.jsxs("button",{onClick:t,style:{width:"100%",padding:"16px 24px",background:"linear-gradient(135deg, #00D4FF 0%, #00A0CC 100%)",border:"none",borderRadius:12,color:"#000",fontSize:16,fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,boxShadow:"0 4px 20px rgba(0, 212, 255, 0.4)"},children:[e.jsx("span",{children:"ðŸš€"}),e.jsx("span",{children:"Get Full Access"})]}),e.jsx("p",{style:{textAlign:"center",fontSize:11,color:"#666",margin:"8px 0 0"},children:"Unlock real-time alerts, auto-trading & more"})]}),e.jsx("style",{children:`
        @keyframes pulse {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.5; }
        }
      `})]})}function f({label:t,value:i,highlight:n}){return e.jsxs("div",{style:{background:n?"linear-gradient(135deg, rgba(0, 212, 255, 0.12) 0%, rgba(57, 255, 20, 0.08) 100%)":"rgba(255, 255, 255, 0.03)",border:n?"1px solid rgba(0, 212, 255, 0.3)":"1px solid rgba(255, 255, 255, 0.08)",borderRadius:12,padding:"16px 12px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:n?"#00D4FF":"#fff",marginBottom:4},children:i}),e.jsx("div",{style:{fontSize:11,color:"#888",textTransform:"uppercase",letterSpacing:"0.5px"},children:t})]})}function S({title:t,icon:i}){return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:12},children:[e.jsx("span",{style:{fontSize:16},children:i}),e.jsx("span",{style:{fontSize:14,fontWeight:600,color:"#fff"},children:t})]})}function C({signal:t}){const i=t.type==="SNIPE",n=i?"#00D4FF":"#39FF14";return e.jsxs("div",{style:{background:`linear-gradient(135deg, ${i?"rgba(0, 212, 255, 0.12)":"rgba(57, 255, 20, 0.12)"} 0%, rgba(20, 20, 20, 0.6) 100%)`,border:`1px solid ${n}40`,borderRadius:16,padding:20},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:16},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:24,fontWeight:700,color:"#fff",marginBottom:4},children:t.token||"TOKEN"}),e.jsx("div",{style:{fontSize:13,color:"#888"},children:t.name||"Unknown Token"})]}),e.jsx("div",{style:{padding:"6px 12px",background:`${n}20`,border:`1px solid ${n}50`,borderRadius:8,fontSize:12,fontWeight:700,color:n},children:t.type})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:12},children:[e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:2},children:"PRICE"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#fff"},children:t.price||"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:2},children:"24H"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:(t.change24h||0)>=0?"#39FF14":"#FF4444"},children:t.change24h?`${t.change24h>0?"+":""}${t.change24h.toFixed(1)}%`:"--"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:11,color:"#666",marginBottom:2},children:"CONFIDENCE"}),e.jsx("div",{style:{fontSize:14,fontWeight:600,color:t.confidence==="HIGH"?"#39FF14":t.confidence==="MEDIUM"?"#FFD700":"#888"},children:t.confidence||"N/A"})]})]})]})}function T({execution:t}){const i=t.action==="BUY";return e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",background:"rgba(255, 255, 255, 0.03)",border:"1px solid rgba(255, 255, 255, 0.08)",borderRadius:10,padding:"12px 14px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("div",{style:{width:32,height:32,borderRadius:8,background:i?"rgba(57, 255, 20, 0.15)":"rgba(255, 68, 68, 0.15)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:14},children:i?"ðŸ“ˆ":"ðŸ“‰"}),e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:14,fontWeight:600,color:"#fff"},children:t.token||"TOKEN"}),e.jsx("div",{style:{fontSize:11,color:"#666"},children:t.chain?.toUpperCase()||"SOL"})]})]}),e.jsxs("div",{style:{textAlign:"right"},children:[e.jsx("div",{style:{fontSize:13,fontWeight:600,color:"#fff"},children:t.amount||"--"}),t.pnl&&e.jsx("div",{style:{fontSize:11,fontWeight:600,color:t.pnl.startsWith("+")?"#39FF14":"#FF4444"},children:t.pnl})]})]})}export{W as S};
