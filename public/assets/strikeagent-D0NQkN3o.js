import{r as i,j as e,T as p,b as k,c as y,i as S,R as j}from"./ThemeContext-DwfIKdXl.js";import{S as w}from"./index-B7WE61Rn.js";const v=["strike_agent","strike_agent_monthly","strike_agent_annual","complete_bundle","complete_bundle_monthly","complete_bundle_annual","founder","legacy_founder","annual","premium","rm","founder","strikeagent","strike_agent"];function I(){const[s,t]=i.useState(null),[a,f]=i.useState(null),[h,u]=i.useState(!0),[R,T]=i.useState(!1),d=(a?.accessLevel||"").toLowerCase(),c=d==="admin"||d==="owner",x=(a?.subscriptionTier||"").toString().toLowerCase(),m=v.includes(x),o=c||m;return i.useEffect(()=>{(async()=>{try{const r=localStorage.getItem("sessionToken"),l=await fetch("/api/session",{headers:r?{"X-Session-Token":r}:{}});if(l.ok){const n=await l.json();if(n.user?.email){t(n.user.email),n.sessionToken&&localStorage.setItem("sessionToken",n.sessionToken);const g=await fetch(`/api/users/${n.user.email}/dashboard`);if(g.ok){const b=await g.json();f({...b,sessionToken:n.sessionToken})}}}}catch(r){console.error("Session fetch error:",r)}finally{u(!1)}})()},[]),h?e.jsxs("div",{style:{minHeight:"100vh",background:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:16,color:"#fff"},children:[e.jsx("img",{src:"/strikeagent-icon.png",alt:"StrikeAgent",style:{width:80,height:80,borderRadius:16}}),e.jsx("div",{style:{fontSize:14,color:"#888"},children:"Loading StrikeAgent..."})]}):s?e.jsx(p,{children:e.jsx(k,{children:e.jsxs("div",{style:{minHeight:"100vh",background:"#0a0a0a",paddingBottom:o?0:80},children:[e.jsxs("header",{style:{position:"sticky",top:0,zIndex:100,background:"#0a0a0a",borderBottom:"1px solid rgba(255,255,255,0.1)",padding:"12px 16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("img",{src:"/strikeagent-icon.png",alt:"StrikeAgent",style:{width:32,height:32,borderRadius:8}}),e.jsx("span",{style:{fontSize:18,fontWeight:700,color:"#fff",fontFamily:"Orbitron, sans-serif"},children:"StrikeAgent"}),c&&e.jsx("span",{style:{fontSize:10,padding:"2px 6px",background:"rgba(139, 92, 246, 0.2)",border:"1px solid rgba(139, 92, 246, 0.4)",borderRadius:4,color:"#8B5CF6",fontWeight:600},children:"ADMIN"})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:o&&e.jsx("span",{style:{fontSize:11,padding:"4px 10px",background:"rgba(57, 255, 20, 0.15)",border:"1px solid rgba(57, 255, 20, 0.3)",borderRadius:12,color:"#39FF14",fontWeight:600},children:"PRO"})})]}),e.jsx("div",{style:{padding:"0 12px"},children:e.jsx(y,{userId:s,userConfig:a,isViewOnly:!o,isAdmin:c})}),!o&&e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,padding:"12px 16px",paddingBottom:"max(12px, env(safe-area-inset-bottom))",background:"linear-gradient(180deg, transparent 0%, #0a0a0a 20%)",borderTop:"1px solid rgba(0, 212, 255, 0.2)"},children:e.jsxs("button",{onClick:()=>window.location.href="https://darkwavepulse.com/app?tab=pricing",style:{width:"100%",padding:"14px 20px",background:"linear-gradient(135deg, #00D4FF 0%, #8B5CF6 100%)",border:"none",borderRadius:10,color:"#fff",fontSize:15,fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,boxShadow:"0 4px 20px rgba(0, 212, 255, 0.3)"},children:[e.jsx("span",{children:"ðŸš€"}),e.jsx("span",{children:"Unlock Full Trading Power"})]})})]})})}):e.jsx(p,{children:e.jsx(w,{onSubscribe:()=>{window.location.href="https://darkwavepulse.com/app?tab=pricing"}})})}"serviceWorker"in navigator&&(navigator.serviceWorker.getRegistrations().then(s=>{s.forEach(t=>{t.unregister(),console.log("[StrikeAgent] Unregistered old service worker:",t.scope)})}),"caches"in window&&caches.keys().then(s=>{s.forEach(t=>{caches.delete(t),console.log("[StrikeAgent] Deleted cache:",t)})}));S.createRoot(document.getElementById("root")).render(e.jsx(j.StrictMode,{children:e.jsx(I,{})}));
