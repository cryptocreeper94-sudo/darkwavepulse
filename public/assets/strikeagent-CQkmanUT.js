import{r as i,j as e,T as p,c as b,d as S,R as v,l as y}from"./SniperBotTab-4e32qIl7.js";import{S as j}from"./StrikeAgentPublicView-ujWzzL5P.js";const w=["strike_agent","strike_agent_monthly","strike_agent_annual","complete_bundle","complete_bundle_monthly","complete_bundle_annual","founder","legacy_founder","annual","premium","rm","founder","strikeagent","strike_agent"];function T(){const[t,n]=i.useState(null),[a,f]=i.useState(null),[u,h]=i.useState(!0),[A,I]=i.useState(!1),l=(a?.accessLevel||"").toLowerCase(),d=l==="admin"||l==="owner",x=(a?.subscriptionTier||"").toString().toLowerCase(),k=w.includes(x),o=d||k;return i.useEffect(()=>{(async()=>{try{const r=localStorage.getItem("sessionToken"),c=await fetch("/api/session",{headers:r?{"X-Session-Token":r}:{}});if(c.ok){const s=await c.json();if(s.user?.email){n(s.user.email),s.sessionToken&&localStorage.setItem("sessionToken",s.sessionToken);const g=await fetch(`/api/users/${s.user.email}/dashboard`);if(g.ok){const m=await g.json();f({...m,sessionToken:s.sessionToken})}}}}catch(r){console.error("Session fetch error:",r)}finally{h(!1)}})()},[]),u?e.jsxs("div",{style:{minHeight:"100vh",background:"#0a0a0a",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:16,color:"#fff"},children:[e.jsx("img",{src:"/strikeagent-icon.png",alt:"StrikeAgent",style:{width:80,height:80,borderRadius:16}}),e.jsx("div",{style:{fontSize:14,color:"#888"},children:"Loading StrikeAgent..."})]}):t?e.jsx(p,{children:e.jsx(b,{children:e.jsxs("div",{style:{minHeight:"100vh",background:"#0a0a0a",paddingBottom:o?0:80},children:[e.jsxs("header",{style:{position:"sticky",top:0,zIndex:100,background:"#0a0a0a",borderBottom:"1px solid rgba(255,255,255,0.1)",padding:"12px 16px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:10},children:[e.jsx("img",{src:"/strikeagent-icon.png",alt:"StrikeAgent",style:{width:32,height:32,borderRadius:8}}),e.jsx("span",{style:{fontSize:18,fontWeight:700,color:"#fff",fontFamily:"Orbitron, sans-serif"},children:"StrikeAgent"}),d&&e.jsx("span",{style:{fontSize:10,padding:"2px 6px",background:"rgba(139, 92, 246, 0.2)",border:"1px solid rgba(139, 92, 246, 0.4)",borderRadius:4,color:"#8B5CF6",fontWeight:600},children:"ADMIN"})]}),e.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},children:o&&e.jsx("span",{style:{fontSize:11,padding:"4px 10px",background:"rgba(57, 255, 20, 0.15)",border:"1px solid rgba(57, 255, 20, 0.3)",borderRadius:12,color:"#39FF14",fontWeight:600},children:"PRO"})})]}),e.jsx("div",{style:{padding:"0 12px"},children:e.jsx(S,{userId:t,userConfig:a,isViewOnly:!o,isAdmin:d})}),!o&&e.jsx("div",{style:{position:"fixed",bottom:0,left:0,right:0,padding:"12px 16px",paddingBottom:"max(12px, env(safe-area-inset-bottom))",background:"linear-gradient(180deg, transparent 0%, #0a0a0a 20%)",borderTop:"1px solid rgba(0, 212, 255, 0.2)"},children:e.jsxs("button",{onClick:()=>window.location.href="https://darkwavepulse.com/app?tab=pricing",style:{width:"100%",padding:"14px 20px",background:"linear-gradient(135deg, #00D4FF 0%, #8B5CF6 100%)",border:"none",borderRadius:10,color:"#fff",fontSize:15,fontWeight:700,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:8,boxShadow:"0 4px 20px rgba(0, 212, 255, 0.3)"},children:[e.jsx("span",{children:"ðŸš€"}),e.jsx("span",{children:"Unlock Full Trading Power"})]})})]})})}):e.jsx(p,{children:e.jsx(j,{onSubscribe:()=>{window.location.href="https://darkwavepulse.com/app?tab=pricing"}})})}"serviceWorker"in navigator&&(navigator.serviceWorker.addEventListener("message",t=>{t.data?.type==="SW_UPDATED"&&(console.log("[StrikeAgent] New version activated, reloading...",t.data.version),window.location.reload())}),window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw-strikeagent.js").then(t=>{console.log("[StrikeAgent] SW registered:",t.scope),t.update(),t.addEventListener("updatefound",()=>{const n=t.installing;n&&n.addEventListener("statechange",()=>{n.state==="installed"&&navigator.serviceWorker.controller&&(console.log("[StrikeAgent] New version available, activating..."),n.postMessage("skipWaiting"))})})}).catch(t=>console.log("[StrikeAgent] SW registration failed:",t))}));v.createRoot(document.getElementById("root")).render(e.jsx(y.StrictMode,{children:e.jsx(T,{})}));
